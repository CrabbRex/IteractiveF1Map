<!doctype html>
<html>
    <head>
    <meta charset="utf-8">
    <title>InteractiveF1</title>
    <link href="style.css" rel="stylesheet" />
    <script src="https://maps.google.com/maps/api/js?key=AIzaSyC1kwdCPHCWJj-OUiKT1bwazL37BXS6sqg"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://mmcc.mq.edu.au/mmcc2041/resources/week8/jquery.ui.map.full.min.js"></script>
    <script>
        $(document).ready(function() { 
            var mapShowing = true;
            let myMap = $('#myMap').gmap({
                'zoom': 1.9,
                'MapTypeId': google.maps.MapTypeId.TERRAIN
            }).gmap('get', 'map');

            //called when marker is clicked
            function updatePage() {
                setTimeout(function() {
                    if(mapShowing) {
                        $('#myMap').show();
                    }
                    else{
                        $('#myMap').hide();
                    }
                }, 7000);
            }
            //Marker at bahrain
            let bahrain = $('#myMap').gmap('addMarker',{'position': '26.0321,50.5108'}).click(function(){
                var markPos = new google.maps.LatLng(26.0321,50.5108);
                smoothZoom(myMap, 14.5, myMap.getZoom(), markPos);
                mapShowing = false;
                updatePage();
            });
            //Recursively call smoothZoom to zoom in 0.5 at a time
            function smoothZoom(map, maxZoom, curZoom, pos){
                if(curZoom >= maxZoom){
                    return;
                }
                else{
                    var newZoom = curZoom + 0.5;
                    map.setZoom(newZoom);
                    map.setCenter(pos);
                    setTimeout(function(){
                        smoothZoom(map, maxZoom, newZoom, pos);
                    }, 150);
                }
            }
        })
    </script>
    </head>
<body>
    <div class="banner">
        <h2>Interactive F1 Map!</h2>
        <button id="reopenMap">Choose Again!</button>
    </div>

    <div id="myMap"></div>
</body>
</html>